define(["jquery","core/str","core/notification","core/ajax","core/templates"],function(a,b,c,d,e){function f(b,c){this.node=a(b),this.courseid=c,this._registerEventHandlers()}var g={DELETEENTRY:".delete-entry",TABLEREGION:"[data-region='table-content']"},h={DELETEENTRY:"tool_albertolarah_delete_entry",GETENTRIES:"tool_albertolarah_entries_list"};f.prototype.node=null,f.prototype.courseid=null,f.prototype._registerEventHandlers=function(){this.node.on("click",g.DELETEENTRY,this._deleteEntry.bind(this))},f.prototype._deleteEntry=function(d){d.preventDefault();var e=a(d.currentTarget).data("id"),f=this._callwsdeleteentry.bind(this);b.get_strings([{key:"delete"},{key:"confirmdeletemsg",component:"tool_albertolarah"},{key:"yes"},{key:"no"}]).done(function(a){c.confirm(a[0],a[1],a[2],a[3],function(){f(e)})}).fail(c.exception)},f.prototype._callwsdeleteentry=function(a){var b=this.courseid,e=d.call([{methodname:h.DELETEENTRY,args:{id:a}},{methodname:h.GETENTRIES,args:{courseid:b}}]);e[1].done(function(a){i(a)}).fail(c.exception)};var i=function(b){e.render("tool_albertolarah/table_content",b).done(function(b,c){a(g.TABLEREGION).replaceWith(b),e.runTemplateJS(c)})};return f});